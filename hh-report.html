<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../vaadin-split-layout/vaadin-split-layout.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../vaadin-icons/vaadin-icons.html">
<link rel="import" href="../paper-dialog/paper-dialog.html">
<link rel="import" href="../paper-checkbox/paper-checkbox.html">
<link rel="import" href="../hh-icons/hh-icons.html">
<script src="../ag-grid-enterprise/dist/ag-grid-enterprise.js"></script>
<link rel="import" href="../ag-grid-polymer/ag-grid-polymer.html">
<script src="licenseKey.js"></script>

<dom-module id="hh-report">
    <template>
        <link rel="stylesheet" href="../bower_components/ag-grid/dist/styles/ag-grid.css">
        <link rel="stylesheet" href="../bower_components/ag-grid/dist/styles/ag-theme-balham-dark.css">
        <style>
            :host {
                display: block;
                /*background-color: #ccc;*/
                height: 100%;
                width: 100%;
            }

            .container {
                display: flex;
                flex-direction: column;
                /*height: calc(100% - 10px);*/
                /*width: calc(100% - 10px);*/
                height: 100%;
                width: 100%;
                /*padding: 5px;*/
            }

            .item {
                width: 100%;
            }

            textarea {
                height: calc(100% - 23px);
                width: calc(100% - 20px);
                background-color: rgba(0, 0, 0, 0.10); /* 투명 (opacity: 0) */
                color: #aaaaaa;
                padding: 10px;
                border: 0px;
                resize: none;
                outline: none !important;
                font-size: 15px;
                line-height: 1.5em;
            }

            textarea::placeholder {
                color: #3c3d47;
            }

            paper-icon-button {
                --paper-icon-button: {
                    color: #aaaaaa;
                };
                --paper-icon-button-hover: {
                    color: #0087cb;
                };
                --paper-icon-button-disabled: {
                    color: #4C5667;
                };
            }

            .icon-container {
                /*height: 100%;*/
                margin: 0px 0;
                padding: 0 0px;
                text-align: center;
                /*width: 19.3%;*/
                display: inline-block;
                cursor: default;
                vertical-align: top;
                box-sizing: border-box;
            }

            .icon-container span {
                font-family: sans-serif;
                display: block;
                color: #aaaaaa;
                transition: all 600ms;
            }

            .icon-container .label-top {
                font-size: 11px;
            }

            .icon-container .label-bottom {
                font-size: 12px;
            }

            .label-reader {
                font-family: sans-serif;
                font-size: 14px;
                color: #aaaaaa;
                font-weight: bold;

            }

            .item-container {
                height: 100%;
            }

            paper-dialog {
                width: 620px;
                hegith: 520px;
            }

            paper-checkbox {
                --paper-checkbox-label: {
                    font-size: 14px;
                    color: #aaaaaa;

                };
                --paper-checkbox-label-checked: {
                    font-size: 14px;
                    color: #aaaaaa;
                    font-weight: bold;
                };
                --paper-checkbox-unchecked-color: #aaaaaa;
                --paper-checkbox-checked-color: #0087cb;
            }

            ag-grid-polymer {
                width: 100%;
                height: 100%;
                color: #aaaaaa !important;
                font-size: 12px !important;
                font-weight: normal !important;
                background-color: #2d333f !important;
                font-family: "NotoSansCJKLight" !important;
            }

            .ag-header {
                background-color: #2d333f !important;
                color: #cccccc !important;
                border-bottom: 3px solid #0087cb !important;
                font-weight: bold !important;
                font-size: 12px !important;
            }

            .ag-row {
                border-bottom: 1px solid #414a59 !important;
            }

            .ag-row-even {
                background-color: rgba(76, 86, 103, 0.2) !important;
            }

            .ag-row-odd {
                background-color: #2d333f !important;
            }

            .ag-cell-focus {
                border: 1px solid darkgrey !important;
            }
        </style>
        <div class="container">
            <div class="item" style="height: 65px; display: flex; justify-content: space-evenly; align-items: center">
                <div class="icon-container">
                    <paper-icon-button id="approve" icon="vaadin:check-square-o" on-click="handleClick"></paper-icon-button>
                    <span class="label-top">Approve/Attest</span>
                </div>
                <div class="icon-container">
                    <paper-icon-button id="save" icon="vaadin:download" on-click="handleClick"></paper-icon-button>
                    <span class="label-top">Save</span>
                </div>
                <div class="icon-container">
                    <paper-icon-button id="preliminary" icon="vaadin:external-link" on-click="handleClick" disabled></paper-icon-button>
                    <span class="label-top">Preliminary</span>
                </div>
                <div class="icon-container">
                    <paper-icon-button id="dictate" icon="vaadin:microphone" on-click="handleClick" disabled></paper-icon-button>
                    <span class="label-top">Dictate</span>
                </div>
                <div class="icon-container">
                    <paper-icon-button id="edit" icon="vaadin:edit" on-click="handleClick" disabled></paper-icon-button>
                    <span class="label-top">Edit</span>
                </div>
                <div class="icon-container">
                    <paper-icon-button id="consultTo" icon="vaadin:comment-ellipsis-o" on-click="handleClick" disabled></paper-icon-button>
                    <span class="label-top">Consult to</span>
                </div>
                <div class="icon-container">
                    <paper-icon-button id="except" icon="vaadin:ban" on-click="handleClick" disabled></paper-icon-button>
                    <span class="label-top">Except</span>
                </div>
                <div class="icon-container">
                    <paper-icon-button id="markCVR" icon="vaadin:warning" on-click="handleClick" disabled></paper-icon-button>
                    <span class="label-top">Mark CVR</span>
                </div>
                <div class="icon-container">
                    <paper-icon-button icon="vaadin:cog" on-tap="openDialog"></paper-icon-button>
                </div>
            </div>
            <div style="height: calc(100% - 130px);">
                <vaadin-split-layout orientation="vertical" style="height: 100%;" theme="minimal">
                    <div style="height: 33%; min-height: 72px; overflow: hidden">
                        <div style="height: 30px; display:flex; align-items: center; padding-left: 10px;background-color: #252934;font-weight: bold;font-size: 12px;box-shadow: 0px 3px 9px -2px #000000; color: #aaaaaa; font-size: 13px;">
                            Findings
                        </div>
                        <div style="height: calc(100% - 32px);">
                            <textarea value="{{findings::input}}" placeholder="Please enter findings">
                            </textarea>

                        </div>
                    </div>
                    <vaadin-split-layout orientation="vertical" style="height: 67%; min-height: 140px" theme="minimal">
                        <div style="height: 50%; min-height: 72px">
                            <div style="height: 30px; display:flex; align-items: center; padding-left: 10px;background-color: #252934;font-weight: bold;font-size: 12px;box-shadow: 0px 3px 9px -2px #000000; color: #aaaaaa; font-size: 13px;">
                                Conclusion
                            </div>
                            <div style="height: calc(100% - 32px);">
                                <textarea value="{{conclusion::input}}" placeholder="Please enter conclusion">
                                </textarea>
                            </div>
                        </div>
                        <div style="height: 50%; min-height: 72px">
                            <div style="height: 30px; display:flex; align-items: center; padding-left: 10px;background-color: #252934;font-weight: bold;font-size: 12px;box-shadow: 0px 3px 9px -2px #000000; color: #aaaaaa; font-size: 13px;">
                                Recommendation
                            </div>
                            <div style="height: calc(100% - 32px);">
                                <textarea value="{{recommendation::input}}" placeholder="Please enter recommendation">
                                </textarea>
                            </div>

                        </div>
                    </vaadin-split-layout>
                </vaadin-split-layout>
            </div>
            <div class="item" style="height: 65px; display: flex;">
                <div class="item-container" style="width: calc(100% - 340px); display:flex; align-items: center; padding-left: 10px;">
                    <span class="label-reader">Radiologist<br>{{radiologist}}</span>
                </div>
                <div class="item-container" style="width: 340px; display: flex; justify-content: space-evenly;">
                    <div class="icon-container">
                        <paper-icon-button id="resetToUnread" icon="vaadin:refresh" on-click="handleClick" disabled></paper-icon-button>
                        <span class="label-bottom">Reset to unread</span>
                    </div>
                    <div class="icon-container">
                        <paper-icon-button id="pasteJustPrevious" icon="vaadin:paste" on-click="handleClick" disabled></paper-icon-button>
                        <span class="label-bottom">Paste just previous</span>
                    </div>
                    <div class="icon-container">
                        <paper-icon-button id="clear" icon="vaadin:trash" on-click="clear"></paper-icon-button>
                        <span class="label-bottom">Clear</span>
                    </div>
                    <div class="icon-container">
                        <paper-icon-button id="prev" icon="healthhub:display-prev" on-click="handleClick"></paper-icon-button>
                        <span class="label-bottom">Prev</span>
                    </div>
                    <div class="icon-container">
                        <paper-icon-button id="next" icon="healthhub:display-next" on-click="handleClick"></paper-icon-button>
                        <span class="label-bottom">Next</span>
                    </div>
                </div>

            </div>
        </div>

        <paper-dialog id="modal">
            <div style="background-color: #2d333f; display: flex; flex-direction: column; width: 100%; height: 100%; padding: 0px; margin:0px;">
                <div style="width: calc(100% - 10px);height: 30px; display:flex; align-items: center; padding-left: 10px;background-color: #252934;font-weight: bold;font-size: 12px;box-shadow: 0px 3px 9px -2px #000000; color: #aaaaaa; font-size: 13px;">
                    Report Configuration
                </div>
                <div style="display:flex; flex-direction: column; width: 560px; height: 430px; padding: 30px">
                    <div style=" display: flex; flex-direction:column; justify-content:space-between; width: 100%; height: 150px;">
                        <paper-checkbox disabled noink>Insert clinical info</paper-checkbox>
                        <paper-checkbox disabled noink>Insert study info</paper-checkbox>
                        <paper-checkbox noink>Auto save report</paper-checkbox>
                        <paper-checkbox noink>on-click expand report window (Report window click when, report window expand)</paper-checkbox>
                        <paper-checkbox disabled noink>Select phrase and alt+F1 (Google search)</paper-checkbox>
                    </div>
                    <div style="width: 100%; height: 29px; margin-top: 30px; border-top: 1px solid #aaaaaa">

                    </div>
                    <div style="background-color: yellow; width: 100%; height: 260px">
                        <ag-grid-polymer class="ag-theme-balham-dark"
                                         gridOptions="{{gridOptions}}"
                                         rowData="{{rowData}}"
                                         columnDefs="{{columnDefs}}">
                        </ag-grid-polymer>
                    </div>
                    <!--<paper-checkbox>Checkbox</paper-checkbox>-->
                    <!--<paper-checkbox>Checkbox</paper-checkbox>-->

                </div>
            </div>
        </paper-dialog>

    </template>

    <script>
        /**
         * `hh-report`
         *
         *
         * @customElement
         * @polymer
         * @demo demo/index.html
         */
        class HhReport extends Polymer.Element {
            static get is() {
                return 'hh-report';
            }

            ready() {
                super.ready();
            }

            static get properties() {
                return {
                    prop1: {
                        type: String,
                        value: 'hh-report'
                    },
                    radiologist: {
                        type: String,
                        value: ''
                    },
                    findings: {
                        type: String,
                        value: ""
                    },
                    conclusion: {
                        type: String,
                        value: ""
                    },
                    recommendation: {
                        type: String,
                        value: ""
                    }

                };
            }

            constructor() {
                super();

                this.gridOptions = {
                    defaultColDef: {
                        suppressMenu: true // 메뉴 막기
                    },
                    enableColResize: true,
                    toolPanelSuppressSideButtons: true,
                    suppressMenu: true,
                    suppressContextMenu: true
                };

                this.columnDefs = [
                    {headerName: "Role", field: "role", width: 150},
                    {headerName: "Department", field: "department", width: 120},
                    {headerName: "ID", field: "id", width: 70},
                    {headerName: "Name", field: "name", width: 100},
                    {headerName: "Position", field: "position"}
                ];
                this.rowData = [
                    {role: "1st reporting doctor", department: "Neuroradiology", id: "5678", name: "나동규", position: "resident"},
                ];
            }

            handleClick(e) {
                let id = e.target.id;
                this.dispatchEvent(new CustomEvent('btnClickEvent', {detail: id}));
            }

            clear() {
                this.initTextArea();
            }

            openDialog() {
                this.$.modal.open();
            }

            initTextArea() {
                this.findings = "";
                this.conclusion = "";
                this.recommendation = "";
            }
        }

        window.customElements.define(HhReport.is, HhReport);
    </script>
</dom-module>
